<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>学习 pwn 的过程中的一点心得 - blog of chuj</title><link rel=icon type=image/png href=https://www.cjovi.icu/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="值得注意的东西 与exp的动调 在 exp 中先指定 terminal，即添加一句 context.terminal = ['tmux','splitw','-h'] 然后在创建进程变量后，添加 gdb.attach(proc.pidof(sh)[0]) #这里的sh是进程变量 这样调试时先打开"><meta property="og:image" content><meta property="og:title" content="学习 pwn 的过程中的一点心得"><meta property="og:description" content="值得注意的东西 与exp的动调 在 exp 中先指定 terminal，即添加一句 context.terminal = ['tmux','splitw','-h'] 然后在创建进程变量后，添加 gdb.attach(proc.pidof(sh)[0]) #这里的sh是进程变量 这样调试时先打开"><meta property="og:type" content="article"><meta property="og:url" content="https://www.cjovi.icu/pwnreview/%E6%88%91%E7%9A%84pwn%E5%BF%83%E5%BE%97.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-21T22:01:00+00:00"><meta property="article:modified_time" content="2020-11-21T22:01:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="学习 pwn 的过程中的一点心得"><meta name=twitter:description content="值得注意的东西 与exp的动调 在 exp 中先指定 terminal，即添加一句 context.terminal = ['tmux','splitw','-h'] 然后在创建进程变量后，添加 gdb.attach(proc.pidof(sh)[0]) #这里的sh是进程变量 这样调试时先打开"><script src=https://www.cjovi.icu/js/feather.min.js></script>
<link href=https://www.cjovi.icu/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://www.cjovi.icu/css/main.858703d01d3c45e6b3e5964f9788e10759b7deb2158ea92653787f83364a9899.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><link rel=stylesheet type=text/css href=https://www.cjovi.icu/css/font.e98a2c89163f90d6fa6d8baf5a50a6561f8ff3d0be1551265f364d138d75df33.css></head><body><div class=content><header><div class=main><a href=https://www.cjovi.icu/>blog of chuj</a></div><nav><a href=/>Home</a>
<a href=/posts.html>All posts</a>
<a href=/about.html>About</a>
<a href=/tags.html>Tags</a></nav></header><main><article><div class=title><h1 class=title>学习 pwn 的过程中的一点心得</h1><div class=meta>Posted on Nov 21, 2020</div></div><section class=body><h3 id=值得注意的东西>值得注意的东西</h3><h4 id=与exp的动调>与exp的动调</h4><p>在 exp 中先指定 terminal，即添加一句</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>context<span style=color:#666>.</span>terminal <span style=color:#666>=</span> [<span style=color:#4070a0>&#39;tmux&#39;</span>,<span style=color:#4070a0>&#39;splitw&#39;</span>,<span style=color:#4070a0>&#39;-h&#39;</span>]
</span></span></code></pre></div><p>然后在创建进程变量后，添加</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>gdb<span style=color:#666>.</span>attach(proc<span style=color:#666>.</span>pidof(sh)[<span style=color:#40a070>0</span>]) <span style=color:#60a0b0;font-style:italic>#这里的sh是进程变量</span>
</span></span></code></pre></div><p>这样调试时先打开tmux，然后就可以动态调试了</p><h4 id=加载指定的libc>加载指定的libc：</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>io <span style=color:#666>=</span> process([<span style=color:#4070a0>&#39;./bin&#39;</span>],env<span style=color:#666>=</span> {<span style=color:#4070a0>&#34;LD_PRELOAD&#34;</span>:<span style=color:#4070a0>&#34;./libc-2.23.so&#34;</span>})
</span></span></code></pre></div><h4 id=可能很有用的东西>可能很有用的东西</h4><p><a href=https://blog.csdn.net/mrhesongze/article/details/81980397>gdb 调试二进制和符号表分开的程序</a></p><p><a href=https://github.com/matrix1001/glibc-all-in-one>glibc-all-in-one</a></p><p><a href=https://github.com/veritas501/PltResolver>高版本 gcc，g++ 编译后的程序 plt IDA 无法识别的问题</a> 一位老学长写的脚本，强！</p><p><a href=https://containerization-automation.readthedocs.io/zh_CN/stable/source/docker/faq/docker%20build%E8%BF%90%E8%A1%8Capt-get%20update%E5%A4%B1%E8%B4%A5/>docker build运行apt-get update失败</a> <code>docker build</code> 时常常出现 apt 的 <code>Temporary failure resolving</code> 错误，可能是 docker 使用的默认 dns 服务器的问题，用文章中的办法可以解决这个问题。</p><p><a href="http://pzhxbz.cn/?p=153">kernel pwn 中可用的一些结构体</a>。一直只知道 tty_struct，但其实有很多可用的，这篇文章总结的很详细</p><p>kernel pwn 中 qemu 的启动参数若没有加 -monitor none，就可以直接用 monitor 和 qemu 交互。</p><p><a href=https://www.codenong.com/cs109284780/>一种利用 tcache statsh unlink 和 fastbin double free 实现控制 tcache next 指针的攻击手段</a>，很有意思，简单来说就是通过 fastbin double free 构造一个环，statsh 的时候就会填满 tcache，然后把环上的一个 chunk 返回，这个 chunk 同时还存在于 tcache 中，这样就实现了 tcache 的 UAF。</p><p><a href=https://www.anquanke.com/post/id/235598>通过 __malloc_assert 实现调用 IO 虚表的利用方法——house of kiwi</a>，在 __malloc_hook，__free_hook，exit 等 fsop 方法失效时，该方法可以实现通过虚表劫持程序执行流</p><p>hitcon ctf 中碰到了一道用户态内核的题，给了任意文件读写，要求拿个 shell（拿到 shell 之后可以直接 mount host 的文件读 flag），不过其实这道题主要考察的应该还是对 Linux 系统的熟悉程度吧，从 perfect blue 战队公开的 exp 中学到了，可以通过<strong>读 <code>/dev/mem</code> 文件</strong>完成 leak 和 rce。该文件是系统的物理内存，root 可读。</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/curious>Curious</a></li></ul></nav></div><script src=https://giscus.app/client.js data-repo=chujDK/chujdk.github.io data-repo-id=R_kgDOI__mNg data-category=Announcements data-category-id=DIC_kwDOI__mNs4CYoyP data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer><div style=display:flex><a class=soc href=https://github.com/chujDK rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/chujdk rel=me title=Twitter><i data-feather=twitter></i></a>
<a class=border></a><a class=soc href=mailto:chujj31@gmail.com rel=me title=Mail><i data-feather=mail></i></a>
<a class=border></a></div><div class=footer-info>&nbsp2020 ~ 2023  © chuj |  Based on <a href=https://github.com/athul/archie>Archie</a> | Built with <a href=https://gohugo.io>Hugo</a> | <a href=#>Goto Top</a></div></footer><script>feather.replace()</script></div></body></html>